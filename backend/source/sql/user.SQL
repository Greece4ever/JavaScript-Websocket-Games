-- Table User
CREATE TABLE IF NOT EXISTS USER (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT UNIQUE NOT NULL,
    password TEXT NOT NULL,
    img TEXT UNIQUE NOT NULL
)

-- For Ajax Authorization
CREATE TABLE IF NOT EXISTS TOKEN (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    token TEXT UNIQUE NOT NULL,
    user_id INTEGER UNIQUE NOT NULL,
    FOREIGN KEY (user_id) REFERENCES USER(id)
)

-- For Chat messagess
CREATE TABLE IF NOT EXISTS MSG(
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    msg TEXT NOT NULL,
    FOREIGN KEY (user_id) REFERENCES USER(id) ON DELETE CASCADE
)

CREATE TABLE IF NOT EXISTS CHAT(
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    date INTEGER NOT NULL,
    msg_id REFERENCES MSG(id) ON DELETE CASCADE NULL
)